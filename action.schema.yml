# Schema file for actions-example-checker validation
# This file provides advanced validation for action inputs and outputs
# See: https://github.com/jessehouwing/actions-example-checker

# Define reusable custom types
types:
  # Validation level choice type - used across multiple inputs
  validation-level:
    type: choice
    options:
      - value: error
        description: Report as error and fail validation
      - value: warning
        description: Report as warning but allow validation to pass
      - value: none
        description: Skip this validation check
      - value: true
        description: Alias for 'error' (legacy compatibility)
        alternatives:
          - error
      - value: false
        description: Alias for 'none' (legacy compatibility)
        alternatives:
          - none

  # Floating versions backend type - tags or branches
  floating-backend:
    type: choice
    options:
      - value: tags
        description: Use Git tags for floating versions (v1, v1.0, latest)
      - value: branches
        description: Use Git branches for floating versions (v1, v1.0, latest)

  # Version pattern - supports basic semver and wildcards
  version-pattern:
    type: string
    match: '^(v?\d+(\.\d+)?(\.\d+)?|v?\d+\.\*|v?\d+\.\d+\.\*|latest)$'

# Validate inputs with explicit types
inputs:
  # GitHub token - string input (no pattern needed for secrets)
  token:
    type: string

  # Validation level inputs - use the custom validation-level type
  check-minor-version:
    type: validation-level

  check-releases:
    type: validation-level

  check-release-immutability:
    type: validation-level

  check-marketplace:
    type: validation-level

  # Boolean inputs
  ignore-preview-releases:
    type: boolean

  auto-fix:
    type: boolean

  # Floating versions backend choice
  floating-versions-use:
    type: floating-backend

  # Ignore versions - supports both comma-separated and newline-separated formats
  # Comma-separated: 'v1.0.0,v2.0.0,v3.0.0'
  # Newline-separated: |
  #   v1.0.0
  #   v2.0.0
  # Each version should match the version-pattern
  ignore-versions:
    type: string
    separators: ['newline', ',']
    items:
      type: string
      match: '^(v?\d+(\.\d+)?(\.\d+)?|v?\d+\.\*|v?\d+\.\d+\.\*|latest)$'
